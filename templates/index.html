{% extends "base.html" %}

{% block title %}{{ SITENAME }}{% if SITEDESCRIPTION %} - {{ SITEDESCRIPTION }}{% endif %}{% endblock title %}

{% block description %}{{ SITEDESCRIPTION|default(SITENAME) }}{% endblock description %}

{% block content %}
<section class="hero is-primary">
    <div class="hero-body">
        <div class="container">
            <h1 class="title is-1">{{ SITENAME }}</h1>
            {% if SITEDESCRIPTION %}
            <h2 class="subtitle is-3">{{ SITEDESCRIPTION }}</h2>
            {% endif %}
        </div>
    </div>
</section>

<section class="section">
    <div class="container">
        {% if articles %}
        <h2 class="title is-3 has-text-centered mb-6">Últimos artículos</h2>
        
        <div class="columns is-multiline">
            {% for article in articles_page.object_list %}
            <div class="column is-half-tablet is-one-third-desktop">
                <div class="card">
                    <div class="card-content">
                        <div class="media">
                            <div class="media-content">
                                <p class="title is-4">
                                    <a href="{{ SITEURL }}/{{ article.url }}" class="has-text-dark">
                                        {{ article.title }}
                                    </a>
                                </p>
                                <p class="subtitle is-6 has-text-grey">
                                    <time datetime="{{ article.date.isoformat() }}">
                                        {{ article.locale_date }}
                                    </time>
                                    {% if article.category %}
                                    en <a href="{{ SITEURL }}/{{ article.category.url }}" class="has-text-primary">{{ article.category }}</a>
                                    {% endif %}
                                </p>
                            </div>
                        </div>
                        
                        <div class="content">
                            {{ article.summary|striptags|truncate(120) }}
                        </div>
                        
                        {% if article.tags %}
                        <div class="tags">
                            {% for tag in article.tags %}
                            <a href="{{ SITEURL }}/{{ tag.url }}" class="tag is-small is-light">{{ tag }}</a>
                            {% endfor %}
                        </div>
                        {% endif %}
                        
                        <div class="has-text-right">
                            <a href="{{ SITEURL }}/{{ article.url }}" class="button is-primary is-small">
                                Leer más
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <!-- Paginación -->
        {% if articles_page.has_other_pages() %}
        <nav class="pagination is-centered mt-6" role="navigation" aria-label="pagination">
            {% if articles_page.has_previous() %}
            <a href="{{ SITEURL }}/{{ page_name }}{{ articles_page.previous_page_number() }}.html" class="pagination-previous">Anterior</a>
            {% endif %}
            
            {% if articles_page.has_next() %}
            <a href="{{ SITEURL }}/{{ page_name }}{{ articles_page.next_page_number() }}.html" class="pagination-next">Siguiente</a>
            {% endif %}
            
            <ul class="pagination-list">
                {% for page_num in articles_page.page_range %}
                {% if page_num == articles_page.number %}
                <li><a class="pagination-link is-current" aria-label="Page {{ page_num }}" aria-current="page">{{ page_num }}</a></li>
                {% else %}
                <li><a href="{{ SITEURL }}/{{ page_name }}{{ page_num }}.html" class="pagination-link" aria-label="Goto page {{ page_num }}">{{ page_num }}</a></li>
                {% endif %}
                {% endfor %}
            </ul>
        </nav>
        {% endif %}
        
        {% else %}
        <div class="notification is-info">
            <p class="has-text-centered">
                <strong>¡Bienvenido!</strong><br>
                Aún no hay artículos publicados. Crea tu primer artículo para comenzar.
            </p>
        </div>
        {% endif %}
    </div>
</section>
{% endblock content %}
