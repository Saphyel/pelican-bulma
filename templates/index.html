{% extends "base.html" %}

{% block title %}{{ SITENAME }}{% if SITEDESCRIPTION %} - {{ SITEDESCRIPTION }}{% endif %}{% endblock title %}

{% block description %}{{ SITEDESCRIPTION|default(SITENAME) }}{% endblock description %}

{% block content %}
<section class="hero is-medium is-primary">
    <div class="hero-body">
        <div class="container">
            <h1 class="title is-1">{{ SITENAME }}</h1>
            {% if SITEDESCRIPTION %}
            <h2 class="subtitle is-3">{{ SITEDESCRIPTION }}</h2>
            {% endif %}
        </div>
    </div>
</section>

<section class="section">
    <div class="container">
        {% if articles %}
        <div class="columns is-multiline">
            {% for article in articles_page.object_list %}
            <div class="column is-12-tablet is-6-desktop">
                <div class="card">
                    <div class="card-content">
                        <div class="media">
                            <div class="media-content">
                                <h2 class="title is-4">
                                    <a href="{{ SITEURL }}/{{ article.url }}">{{ article.title }}</a>
                                </h2>
                                <p class="subtitle is-6">
                                    <time datetime="{{ article.date.isoformat() }}">
                                        {{ article.locale_date }}
                                    </time>
                                    {% if article.author %}
                                    by <span class="has-text-weight-medium">{{ article.author }}</span>
                                    {% endif %}
                                </p>
                            </div>
                        </div>
                        
                        <div class="content">
                            {{ article.summary }}
                            
                            {% if article.tags %}
                            <div class="tags">
                                {% for tag in article.tags %}
                                <span class="tag is-light">{{ tag }}</span>
                                {% endfor %}
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    
                    <footer class="card-footer">
                        <a href="{{ SITEURL }}/{{ article.url }}" class="card-footer-item">
                            Read More
                        </a>
                    </footer>
                </div>
            </div>
            {% endfor %}
        </div>
        
        {% if articles_page.has_other_pages() %}
        <nav class="pagination is-centered" role="navigation" aria-label="pagination">
            {% if articles_page.has_previous() %}
            <a class="pagination-previous" href="{{ SITEURL }}/{{ articles_previous_page.url }}">
                Previous
            </a>
            {% else %}
            <a class="pagination-previous" disabled>Previous</a>
            {% endif %}
            
            {% if articles_page.has_next() %}
            <a class="pagination-next" href="{{ SITEURL }}/{{ articles_next_page.url }}">
                Next
            </a>
            {% else %}
            <a class="pagination-next" disabled>Next</a>
            {% endif %}
            
            <ul class="pagination-list">
                {% for page in articles_paginator.page_range %}
                {% if page == articles_page.number %}
                <li>
                    <a class="pagination-link is-current" aria-label="Page {{ page }}" aria-current="page">
                        {{ page }}
                    </a>
                </li>
                {% else %}
                <li>
                    <a class="pagination-link" aria-label="Goto page {{ page }}" 
                       href="{{ SITEURL }}/{{ articles_paginator.page(page).url }}">
                        {{ page }}
                    </a>
                </li>
                {% endif %}
                {% endfor %}
            </ul>
        </nav>
        {% endif %}
        
        {% else %}
        <div class="notification is-info">
            <p class="title is-4">No articles found</p>
            <p>There are no articles to display yet.</p>
        </div>
        {% endif %}
    </div>
</section>
{% endblock content %}
